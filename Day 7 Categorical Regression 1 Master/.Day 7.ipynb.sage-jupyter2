{"exec_count":13,"input":"**Question** What does the slope in this regression represent? Is it greater, lesser, or equal to effect than what was indicated in the difference of the means above?","state":"done","pos":13,"cell_type":"markdown","type":"cell","id":"87a947","kernel":"ir-sage"}
{"exec_count":4,"start":1545053812646,"input":"library(dplyr)\nlibrary(ggplot2)","state":"done","pos":1,"type":"cell","end":1545053812667,"id":"7dbe71","kernel":"ir-sage"}
{"exec_count":5,"start":1545053813645,"input":"exams<-read.csv(\"exams.csv\")","state":"done","pos":2,"type":"cell","end":1545053813663,"id":"96823d","kernel":"ir-sage"}
{"output":{"0":{"data":{"image/svg+xml":"86f28c77c18b2cc67e2ded347409cc19cd6203a4"},"metadata":{"image/svg+xml":{"isolated":true}}}},"exec_count":7,"start":1545053982464,"input":"ggplot(data=exams, aes(x=gender, y=mathscore, group=gender))+geom_boxplot()","state":"done","pos":6,"type":"cell","end":1545053983678,"id":"aa2bd9","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/html":"<table>\n<thead><tr><th scope=col>gender</th><th scope=col>mean_gender</th><th scope=col>sd_gender</th><th scope=col>n</th></tr></thead>\n<tbody>\n\t<tr><td>female  </td><td>64.77011</td><td>15.07158</td><td>522     </td></tr>\n\t<tr><td>male    </td><td>69.11925</td><td>14.68853</td><td>478     </td></tr>\n</tbody>\n</table>\n"}}},"exec_count":14,"start":1545054822156,"input":"exams %>%\n  group_by(gender) %>%\n  summarise(mean_gender = mean(mathscore), sd_gender = sd(mathscore), n = n())","state":"done","pos":8,"type":"cell","end":1545054822185,"id":"ab6acf","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/html":"<table>\n<thead><tr><th scope=col>gender</th><th scope=col>race</th><th scope=col>parentaleducation</th><th scope=col>lunch</th><th scope=col>testprep</th><th scope=col>mathscore</th><th scope=col>readingscore</th><th scope=col>writingscore</th></tr></thead>\n<tbody>\n\t<tr><td>male              </td><td>group C           </td><td>bachelor's degree </td><td>free/reduced      </td><td>none              </td><td>61                </td><td>65                </td><td>56                </td></tr>\n\t<tr><td>female            </td><td>group B           </td><td>some high school  </td><td>standard          </td><td>none              </td><td>81                </td><td>88                </td><td>87                </td></tr>\n\t<tr><td>male              </td><td>group B           </td><td>master's degree   </td><td>standard          </td><td>none              </td><td>85                </td><td>74                </td><td>75                </td></tr>\n\t<tr><td>male              </td><td>group C           </td><td>associate's degree</td><td>standard          </td><td>completed         </td><td>94                </td><td>91                </td><td>90                </td></tr>\n\t<tr><td>female            </td><td>group B           </td><td>high school       </td><td>free/reduced      </td><td>none              </td><td>58                </td><td>70                </td><td>65                </td></tr>\n\t<tr><td>male              </td><td>group D           </td><td>associate's degree</td><td>standard          </td><td>none              </td><td>71                </td><td>65                </td><td>65                </td></tr>\n</tbody>\n</table>\n"}},"1":{"name":"stdout","text":"'data.frame':\t1000 obs. of  8 variables:\n $ gender           : Factor w/ 2 levels \"female\",\"male\": 2 1 2 2 1 2 1 1 1 1 ...\n $ race             : Factor w/ 5 levels \"group A\",\"group B\",..: 3 2 2 3 2 4 3 3 4 4 ...\n $ parentaleducation: Factor w/ 6 levels \"associate's degree\",..: 2 6 4 1 3 1 6 1 6 5 ...\n $ lunch            : Factor w/ 2 levels \"free/reduced\",..: 1 2 2 2 1 2 2 2 1 1 ...\n $ testprep         : Factor w/ 2 levels \"completed\",\"none\": 2 2 2 1 2 2 2 1 2 2 ...\n $ mathscore        : int  61 81 85 94 58 71 63 81 40 62 ...\n $ readingscore     : int  65 88 74 91 70 65 72 92 50 74 ...\n $ writingscore     : int  56 87 75 90 65 65 73 92 54 73 ...\n"}},"exec_count":6,"start":1545053814953,"input":"head(exams)\nstr(exams)","state":"done","pos":4,"type":"cell","end":1545053815013,"id":"efbe66","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/html":"<table>\n<thead><tr><th scope=col>lunch</th><th scope=col>mean_lunch</th><th scope=col>sd_lunch</th><th scope=col>n</th></tr></thead>\n<tbody>\n\t<tr><td>free/reduced</td><td>58.37101    </td><td>13.85583    </td><td>345         </td></tr>\n\t<tr><td>standard    </td><td>71.31450    </td><td>13.66256    </td><td>655         </td></tr>\n</tbody>\n</table>\n"}},"1":{"data":{"text/plain":"\nCall:\nlm(formula = mathscore ~ numLunch, data = exams)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-48.315  -8.371  -0.315   9.685  37.629 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  71.3145     0.5365  132.94   <2e-16 ***\nnumLunch    -12.9435     0.9133  -14.17   <2e-16 ***\n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n\nResidual standard error: 13.73 on 998 degrees of freedom\nMultiple R-squared:  0.1675,\tAdjusted R-squared:  0.1667 \nF-statistic: 200.8 on 1 and 998 DF,  p-value: < 2.2e-16\n"}},"2":{"data":{"image/svg+xml":"d1c1ed9d25a781a8f8d5eae30919729b3ea0f064"},"metadata":{"image/svg+xml":{"isolated":true}}}},"exec_count":15,"start":1545054876304,"input":"ggplot(data=exams, aes(x=lunch, y=mathscore, group=lunch))+geom_boxplot()\nexams %>%\n  group_by(lunch) %>%\n  summarise(mean_lunch = mean(mathscore), sd_lunch = sd(mathscore), n = n())\nexams<-exams %>%\n    mutate(numLunch=ifelse(lunch==\"free/reduced\", 1, 0))\nsimpleLunch<-lm(mathscore~numLunch, data=exams)\nsummary(simpleLunch)","state":"done","pos":17,"type":"cell","end":1545054877186,"id":"2c3980","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/html":"<table>\n<thead><tr><th scope=col>testprep</th><th scope=col>mean_testprep</th><th scope=col>sd_testprep</th><th scope=col>n</th></tr></thead>\n<tbody>\n\t<tr><td>completed</td><td>68.94817 </td><td>14.70382 </td><td>328      </td></tr>\n\t<tr><td>none     </td><td>65.82440 </td><td>15.10674 </td><td>672      </td></tr>\n</tbody>\n</table>\n"}},"1":{"data":{"text/plain":"\nCall:\nlm(formula = mathscore ~ numtestprep, data = exams)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-49.948  -9.948   1.052  10.052  34.176 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  65.8244     0.5777 113.941  < 2e-16 ***\nnumtestprep   3.1238     1.0087   3.097  0.00201 ** \n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n\nResidual standard error: 14.98 on 998 degrees of freedom\nMultiple R-squared:  0.009518,\tAdjusted R-squared:  0.008525 \nF-statistic:  9.59 on 1 and 998 DF,  p-value: 0.002011\n"}},"2":{"data":{"image/svg+xml":"72ae6262c99aeb410663b0a3ed29c8a01d224c7b"},"metadata":{"image/svg+xml":{"isolated":true}}}},"exec_count":16,"start":1545055121564,"input":"ggplot(data=exams, aes(x=testprep, y=mathscore, group=testprep))+geom_boxplot()\nexams %>%\n  group_by(testprep) %>%\n  summarise(mean_testprep = mean(mathscore), sd_testprep = sd(mathscore), n = n())\nexams<-exams %>%\n    mutate(numtestprep=ifelse(testprep==\"completed\", 1, 0))\nsimpletestprep<-lm(mathscore~numtestprep, data=exams)\nsummary(simpletestprep)","state":"done","pos":21,"type":"cell","end":1545055121999,"id":"0ad942","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/plain":"\nCall:\nlm(formula = mathscore ~ gender + lunch + testprep, data = exams)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-45.218  -9.218   0.193   9.701  33.693 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    58.7656     1.0177  57.744  < 2e-16 ***\ngendermale      4.0819     0.8547   4.776 2.06e-06 ***\nlunchstandard  12.9108     0.8983  14.373  < 2e-16 ***\ntestprepnone   -3.4588     0.9093  -3.804 0.000151 ***\n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n\nResidual standard error: 13.5 on 996 degrees of freedom\nMultiple R-squared:  0.1972,\tAdjusted R-squared:  0.1948 \nF-statistic: 81.58 on 3 and 996 DF,  p-value: < 2.2e-16\n"}}},"exec_count":21,"start":1545056053267,"input":"mult2<-lm(mathscore~gender+lunch+testprep, data=exams)\nsummary(mult2)","state":"done","pos":27,"type":"cell","end":1545056053322,"id":"3ea94d","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/plain":"\nCall:\nlm(formula = mathscore ~ numGender + numLunch + numtestprep + \n    race, data = exams)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-54.816  -8.484   0.531   9.644  34.644 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  65.7375     1.5015  43.781  < 2e-16 ***\nnumGender     3.9202     0.8226   4.766 2.16e-06 ***\nnumLunch    -13.1928     0.8666 -15.225  < 2e-16 ***\nnumtestprep   3.3591     0.8768   3.831 0.000135 ***\nracegroup B  -0.0154     1.6549  -0.009 0.992575    \nracegroup C   0.8117     1.5649   0.519 0.604068    \nracegroup D   3.3008     1.5823   2.086 0.037227 *  \nracegroup E  12.0787     1.7979   6.718 3.10e-11 ***\n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n\nResidual standard error: 12.98 on 992 degrees of freedom\nMultiple R-squared:  0.2609,\tAdjusted R-squared:  0.2556 \nF-statistic: 50.01 on 7 and 992 DF,  p-value: < 2.2e-16\n"}}},"exec_count":20,"start":1545055931234,"input":"mult1<-lm(mathscore~numGender+numLunch+numtestprep+race, data=exams)\nsummary(mult1)","state":"done","pos":23,"type":"cell","end":1545055931269,"id":"d43b15","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/plain":"\nCall:\nlm(formula = mathscore ~ numGender, data = exams)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-49.119 -10.119   0.230   9.968  34.230 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  64.7701     0.6517  99.386  < 2e-16 ***\nnumGender     4.3491     0.9426   4.614 4.47e-06 ***\n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n\nResidual standard error: 14.89 on 998 degrees of freedom\nMultiple R-squared:  0.02088,\tAdjusted R-squared:  0.0199 \nF-statistic: 21.29 on 1 and 998 DF,  p-value: 4.467e-06\n"}}},"exec_count":12,"start":1545054552647,"input":"exams<-exams %>%\n    mutate(numGender=ifelse(gender==\"male\", 1, 0))\nsimpleGender<-lm(mathscore~numGender, data=exams)\nsummary(simpleGender)","state":"done","pos":12,"type":"cell","end":1545054552775,"id":"e2de1f","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/plain":"\nCall:\nlm(formula = readingscore ~ gender + lunch + testprep, data = exams)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-48.300  -8.544   0.247   8.602  33.087 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    71.8621     0.9932  72.357  < 2e-16 ***\ngendermale     -8.3878     0.8341 -10.056  < 2e-16 ***\nlunchstandard   8.5474     0.8766   9.751  < 2e-16 ***\ntestprepnone   -5.1090     0.8874  -5.757 1.14e-08 ***\n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n\nResidual standard error: 13.17 on 996 degrees of freedom\nMultiple R-squared:  0.1833,\tAdjusted R-squared:  0.1809 \nF-statistic: 74.53 on 3 and 996 DF,  p-value: < 2.2e-16\n"}}},"exec_count":22,"start":1545056440809,"input":"mult3<-lm(readingscore~gender+lunch+testprep, data=exams)\nsummary(mult3)","state":"done","pos":31,"type":"cell","end":1545056440855,"id":"54a184","kernel":"ir-sage"}
{"type":"cell","id":"041ec9","pos":24,"input":"**Question** Do these results support the theory that there is a connection between the testprep and lunch variables?","cell_type":"markdown"}
{"type":"cell","id":"1329a0","pos":18,"input":"**Question** What we have learned about the effect of free/reduced lunch has on the expected math scores of students.","cell_type":"markdown"}
{"type":"cell","id":"3fb88d","pos":14,"input":""}
{"type":"cell","id":"4a98bc","pos":9,"input":"**Question 1** Describe in your own words the difference in math scores between boys and girls. Use the box plot and the summary data in your answer.","cell_type":"markdown"}
{"type":"cell","id":"4b5744","pos":30,"input":"## You try\n\nFind the effects of the ```lunch```, ```gender```, and ```testprep``` on writing score. **Question** Describe the quantitative expected effect of each variable on reading scores. ","cell_type":"markdown"}
{"type":"cell","id":"4c8069","pos":33,"input":"**Question** A friend is considering taking a test prep course to improve their reading scores. Their current score is a 58. They feel that they need at least a 65 to have a chance at their goals. Is such a gain likely given the data here?","cell_type":"markdown"}
{"type":"cell","id":"5091c7","pos":28,"input":"**Question** How is this different from what we have done above? ","cell_type":"markdown"}
{"type":"cell","id":"58e1ed","pos":0,"input":"# Day 7 Regression with a categorical variable\n\nIn this data we are looking at the effect of various categorical variables on a continuous quantitative variable. **NOTE: The data in this dataset is not real. It is created for an educational setting.**","cell_type":"markdown"}
{"type":"cell","id":"5edbd5","pos":25,"input":""}
{"type":"cell","id":"667ff0","pos":15,"input":""}
{"type":"cell","id":"68c681","pos":19,"input":""}
{"type":"cell","id":"6ac89c","pos":16,"input":"Let's dig deeper into other variables. Let's look at the ```lunch``` variable. And do so in the same way. \n\nWe can do this all at once with the following code copied from above, and then edited to indicate ```lunch```.\n\n```\nggplot(data=exams, aes(x=lunch, y=mathscore, group=lunch))+geom_boxplot()\nexams %>%\n  group_by(lunch) %>%\n  summarise(mean_lunch = mean(mathscore), sd_lunch = sd(mathscore), n = n())\nexams<-exams %>%\n    mutate(numLunch=ifelse(lunch==\"free/reduced\", 1, 0))\nsimpleLunch<-lm(mathscore~numLunch, data=exams)\nsummary(simpleLunch)\n```","cell_type":"markdown"}
{"type":"cell","id":"95b3e1","pos":22,"input":"## Putting it together with Multilinear regression\n\nIt is possible that there are connections between the effects of these variables. For instance, between testprep and lunch. Both of these can be connected to family resources. Using multilinear regression we can look to separate the effects of those. Let's create a model that incorporates all the variables we have so far. \n\n```\nmult1<-lm(mathscore~numGender+numLunch+numtestprep, data=exams)\nsummary(mult1)\n```","cell_type":"markdown"}
{"type":"cell","id":"aa909b","pos":32,"input":""}
{"type":"cell","id":"b3ef0a","pos":11,"input":"## Using regression\n\nWe can also use the tools of regression to look at the effect of gender. To do this we will need to change the data so that gender can be considered a numerical variable. We will do this by introducing a *dummy variable* that indicates has a valus of 1 if the observation is that of a boy, and 0 if it is the value of a girl.\n\n```\nexams<-exams %>%\n    mutate(numGender=ifelse(gender==\"male\", 1, 0))\nsimpleGender<-lm(mathscore~numGender, data=exams)\nsummary(simpleGender)\n```\n","cell_type":"markdown"}
{"type":"cell","id":"b8cb27","pos":3,"input":"Let's look at the data using the ```head``` and ```str``` commands.","cell_type":"markdown"}
{"type":"cell","id":"bb1f2b","pos":34,"input":""}
{"type":"cell","id":"bda2da","pos":7,"input":"We can also use the ```summarize``` function. The code below creates groups of the exam data by gender then calculates the mean, standard deviation, and the number of observations in that group.\n\n```\nexams %>%\n  group_by(gender) %>%\n  summarise(mean_gender = mean(mathscore), sd_gender = sd(mathscore), n = n())\n\n```","cell_type":"markdown"}
{"type":"cell","id":"c153b6","pos":20,"input":"**Question** Run a similar analysis on testprep. Discuss effect of test prep on math scores.","cell_type":"markdown"}
{"type":"cell","id":"c97049","pos":5,"input":"Let's start by investigating the math scores. We would be interested to see if there are any effects by these categorical variables. For ease, let's focus on ```gender```, ```lunch```, and ```testprep```. The easiest way to see if these variables would be important is to make displays of data that would allow our eye to see the relative impact of these variables. Let's do that now, for instance\n\n```\nggplot(data=exams, aes(x=gender, y=mathscore, group=gender))+geom_boxplot()\n```\n\n","cell_type":"markdown"}
{"type":"cell","id":"d83721","pos":29,"input":""}
{"type":"cell","id":"e8c01a","pos":10,"input":"**Write your answer here**","cell_type":"markdown"}
{"type":"cell","id":"ee99ca","pos":26,"input":"Try this linear regression with the categorical variables. \n\n```\nmult2<-lm(mathscore~gender+lunch+testprep, data=exams)\nsummary(mult2)\n\n```","cell_type":"markdown"}
{"type":"file","last_load":1545053248257}
{"type":"settings","backend_state":"running","trust":true,"kernel":"ir-sage","kernel_usage":{"cpu":0,"memory":122314752},"kernel_state":"idle"}