{"exec_count":7,"start":1543351040083,"input":"linearmodel<-lm(boys ~ year, present)","state":"done","pos":2,"type":"cell","end":1543351040118,"id":"ec253c","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/html":"<table>\n<thead><tr><th scope=col>X</th><th scope=col>year</th><th scope=col>boys</th><th scope=col>girls</th></tr></thead>\n<tbody>\n\t<tr><td>1      </td><td>1940   </td><td>1211684</td><td>1148715</td></tr>\n\t<tr><td>2      </td><td>1941   </td><td>1289734</td><td>1223693</td></tr>\n\t<tr><td>3      </td><td>1942   </td><td>1444365</td><td>1364631</td></tr>\n\t<tr><td>4      </td><td>1943   </td><td>1508959</td><td>1427901</td></tr>\n\t<tr><td>5      </td><td>1944   </td><td>1435301</td><td>1359499</td></tr>\n\t<tr><td>6      </td><td>1945   </td><td>1404587</td><td>1330869</td></tr>\n</tbody>\n</table>\n"}}},"exec_count":3,"start":1543350815404,"input":"present<-read.csv(\"present.csv\")\nhead(present)","state":"done","pos":1,"type":"cell","end":1543350815442,"id":"ba22c5","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/html":"\n<table width=\"100%\" summary=\"page for lm {stats}\"><tr><td>lm {stats}</td><td style=\"text-align: right;\">R Documentation</td></tr></table>\n\n<h2>Fitting Linear Models</h2>\n\n<h3>Description</h3>\n\n<p><code>lm</code> is used to fit linear models.\nIt can be used to carry out regression,\nsingle stratum analysis of variance and\nanalysis of covariance (although <code>aov</code> may provide a more\nconvenient interface for these).\n</p>\n\n\n<h3>Usage</h3>\n\n<pre>\nlm(formula, data, subset, weights, na.action,\n   method = \"qr\", model = TRUE, x = FALSE, y = FALSE, qr = TRUE,\n   singular.ok = TRUE, contrasts = NULL, offset, ...)\n</pre>\n\n\n<h3>Arguments</h3>\n\n<table summary=\"R argblock\">\n<tr valign=\"top\"><td><code>formula</code></td>\n<td>\n<p>an object of class <code>\"formula\"</code> (or one that\ncan be coerced to that class): a symbolic description of the\nmodel to be fitted.  The details of model specification are given\nunder &lsquo;Details&rsquo;.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>data</code></td>\n<td>\n<p>an optional data frame, list or environment (or object\ncoercible by <code>as.data.frame</code> to a data frame) containing\nthe variables in the model.  If not found in <code>data</code>, the\nvariables are taken from <code>environment(formula)</code>,\ntypically the environment from which <code>lm</code> is called.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>subset</code></td>\n<td>\n<p>an optional vector specifying a subset of observations\nto be used in the fitting process.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>weights</code></td>\n<td>\n<p>an optional vector of weights to be used in the fitting\nprocess.  Should be <code>NULL</code> or a numeric vector.\nIf non-NULL, weighted least squares is used with weights\n<code>weights</code> (that is, minimizing <code>sum(w*e^2)</code>); otherwise\nordinary least squares is used.  See also &lsquo;Details&rsquo;,</p>\n</td></tr>\n<tr valign=\"top\"><td><code>na.action</code></td>\n<td>\n<p>a function which indicates what should happen\nwhen the data contain <code>NA</code>s.  The default is set by\nthe <code>na.action</code> setting of <code>options</code>, and is\n<code>na.fail</code> if that is unset.  The &lsquo;factory-fresh&rsquo;\ndefault is <code>na.omit</code>.  Another possible value is\n<code>NULL</code>, no action.  Value <code>na.exclude</code> can be useful.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>method</code></td>\n<td>\n<p>the method to be used; for fitting, currently only\n<code>method = \"qr\"</code> is supported; <code>method = \"model.frame\"</code> returns\nthe model frame (the same as with <code>model = TRUE</code>, see below).</p>\n</td></tr>\n<tr valign=\"top\"><td><code>model, x, y, qr</code></td>\n<td>\n<p>logicals.  If <code>TRUE</code> the corresponding\ncomponents of the fit (the model frame, the model matrix, the\nresponse, the QR decomposition) are returned.\n</p>\n</td></tr>\n<tr valign=\"top\"><td><code>singular.ok</code></td>\n<td>\n<p>logical. If <code>FALSE</code> (the default in S but\nnot in <span style=\"font-family: Courier New, Courier; color: #666666;\"><b>R</b></span>) a singular fit is an error.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>contrasts</code></td>\n<td>\n<p>an optional list. See the <code>contrasts.arg</code>\nof <code>model.matrix.default</code>.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>offset</code></td>\n<td>\n<p>this can be used to specify an <em>a priori</em> known\ncomponent to be included in the linear predictor during fitting.\nThis should be <code>NULL</code> or a numeric vector of length equal to\nthe number of cases.  One or more <code>offset</code> terms can be\nincluded in the formula instead or as well, and if more than one are\nspecified their sum is used.  See <code>model.offset</code>.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>...</code></td>\n<td>\n<p>additional arguments to be passed to the low level\nregression fitting functions (see below).</p>\n</td></tr>\n</table>\n\n\n<h3>Details</h3>\n\n<p>Models for <code>lm</code> are specified symbolically.  A typical model has\nthe form <code>response ~ terms</code> where <code>response</code> is the (numeric)\nresponse vector and <code>terms</code> is a series of terms which specifies a\nlinear predictor for <code>response</code>.  A terms specification of the form\n<code>first + second</code> indicates all the terms in <code>first</code> together\nwith all the terms in <code>second</code> with duplicates removed.  A\nspecification of the form <code>first:second</code> indicates the set of\nterms obtained by taking the interactions of all terms in <code>first</code>\nwith all terms in <code>second</code>.  The specification <code>first*second</code>\nindicates the <em>cross</em> of <code>first</code> and <code>second</code>.  This is\nthe same as <code>first + second + first:second</code>.\n</p>\n<p>If the formula includes an <code>offset</code>, this is evaluated and\nsubtracted from the response.\n</p>\n<p>If <code>response</code> is a matrix a linear model is fitted separately by\nleast-squares to each column of the matrix.\n</p>\n<p>See <code>model.matrix</code> for some further details.  The terms in\nthe formula will be re-ordered so that main effects come first,\nfollowed by the interactions, all second-order, all third-order and so\non: to avoid this pass a <code>terms</code> object as the formula (see\n<code>aov</code> and <code>demo(glm.vr)</code> for an example).\n</p>\n<p>A formula has an implied intercept term.  To remove this use either\n<code>y ~ x - 1</code> or <code>y ~ 0 + x</code>.  See <code>formula</code> for\nmore details of allowed formulae.\n</p>\n<p>Non-<code>NULL</code> <code>weights</code> can be used to indicate that different\nobservations have different variances (with the values in\n<code>weights</code> being inversely proportional to the variances); or\nequivalently, when the elements of <code>weights</code> are positive\nintegers <i>w_i</i>, that each response <i>y_i</i> is the mean of\n<i>w_i</i> unit-weight observations (including the case that there are\n<i>w_i</i> observations equal to <i>y_i</i> and the data have been\nsummarized).\n</p>\n<p><code>lm</code> calls the lower level functions <code>lm.fit</code>, etc,\nsee below, for the actual numerical computations.  For programming\nonly, you may consider doing likewise.\n</p>\n<p>All of <code>weights</code>, <code>subset</code> and <code>offset</code> are evaluated\nin the same way as variables in <code>formula</code>, that is first in\n<code>data</code> and then in the environment of <code>formula</code>.\n</p>\n\n\n<h3>Value</h3>\n\n<p><code>lm</code> returns an object of <code>class</code> <code>\"lm\"</code> or for\nmultiple responses of class <code>c(\"mlm\", \"lm\")</code>.\n</p>\n<p>The functions <code>summary</code> and <code>anova</code> are used to\nobtain and print a summary and analysis of variance table of the\nresults.  The generic accessor functions <code>coefficients</code>,\n<code>effects</code>, <code>fitted.values</code> and <code>residuals</code> extract\nvarious useful features of the value returned by <code>lm</code>.\n</p>\n<p>An object of class <code>\"lm\"</code> is a list containing at least the\nfollowing components:\n</p>\n<table summary=\"R valueblock\">\n<tr valign=\"top\"><td><code>coefficients</code></td>\n<td>\n<p>a named vector of coefficients</p>\n</td></tr>\n<tr valign=\"top\"><td><code>residuals</code></td>\n<td>\n<p>the residuals, that is response minus fitted values.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>fitted.values</code></td>\n<td>\n<p>the fitted mean values.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>rank</code></td>\n<td>\n<p>the numeric rank of the fitted linear model.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>weights</code></td>\n<td>\n<p>(only for weighted fits) the specified weights.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>df.residual</code></td>\n<td>\n<p>the residual degrees of freedom.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>call</code></td>\n<td>\n<p>the matched call.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>terms</code></td>\n<td>\n<p>the <code>terms</code> object used.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>contrasts</code></td>\n<td>\n<p>(only where relevant) the contrasts used.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>xlevels</code></td>\n<td>\n<p>(only where relevant) a record of the levels of the\nfactors used in fitting.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>offset</code></td>\n<td>\n<p>the offset used (missing if none were used).</p>\n</td></tr>\n<tr valign=\"top\"><td><code>y</code></td>\n<td>\n<p>if requested, the response used.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>x</code></td>\n<td>\n<p>if requested, the model matrix used.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>model</code></td>\n<td>\n<p>if requested (the default), the model frame used.</p>\n</td></tr>\n<tr valign=\"top\"><td><code>na.action</code></td>\n<td>\n<p>(where relevant) information returned by\n<code>model.frame</code> on the special handling of <code>NA</code>s.</p>\n</td></tr>\n</table>\n<p>In addition, non-null fits will have components <code>assign</code>,\n<code>effects</code> and (unless not requested) <code>qr</code> relating to the linear\nfit, for use by extractor functions such as <code>summary</code> and\n<code>effects</code>.\n</p>\n\n\n<h3>Using time series</h3>\n\n<p>Considerable care is needed when using <code>lm</code> with time series.\n</p>\n<p>Unless <code>na.action = NULL</code>, the time series attributes are\nstripped from the variables before the regression is done.  (This is\nnecessary as omitting <code>NA</code>s would invalidate the time series\nattributes, and if <code>NA</code>s are omitted in the middle of the series\nthe result would no longer be a regular time series.)\n</p>\n<p>Even if the time series attributes are retained, they are not used to\nline up series, so that the time shift of a lagged or differenced\nregressor would be ignored.  It is good practice to prepare a\n<code>data</code> argument by <code>ts.intersect(..., dframe = TRUE)</code>,\nthen apply a suitable <code>na.action</code> to that data frame and call\n<code>lm</code> with <code>na.action = NULL</code> so that residuals and fitted\nvalues are time series.\n</p>\n\n\n<h3>Note</h3>\n\n<p>Offsets specified by <code>offset</code> will not be included in predictions\nby <code>predict.lm</code>, whereas those specified by an offset term\nin the formula will be.\n</p>\n\n\n<h3>Author(s)</h3>\n\n<p>The design was inspired by the S function of the same name described\nin Chambers (1992).  The implementation of model formula by Ross Ihaka\nwas based on Wilkinson &amp; Rogers (1973).\n</p>\n\n\n<h3>References</h3>\n\n<p>Chambers, J. M. (1992)\n<em>Linear models.</em>\nChapter 4 of <em>Statistical Models in S</em>\neds J. M. Chambers and T. J. Hastie, Wadsworth &amp; Brooks/Cole.\n</p>\n<p>Wilkinson, G. N. and Rogers, C. E. (1973)\nSymbolic descriptions of factorial models for analysis of variance.\n<em>Applied Statistics</em>, <b>22</b>, 392&ndash;9.\n</p>\n\n\n<h3>See Also</h3>\n\n<p><code>summary.lm</code> for summaries and <code>anova.lm</code> for\nthe ANOVA table; <code>aov</code> for a different interface.\n</p>\n<p>The generic functions <code>coef</code>, <code>effects</code>,\n<code>residuals</code>, <code>fitted</code>, <code>vcov</code>.\n</p>\n<p><code>predict.lm</code> (via <code>predict</code>) for prediction,\nincluding confidence and prediction intervals;\n<code>confint</code> for confidence intervals of <em>parameters</em>.\n</p>\n<p><code>lm.influence</code> for regression diagnostics, and\n<code>glm</code> for <b>generalized</b> linear models.\n</p>\n<p>The underlying low level functions,\n<code>lm.fit</code> for plain, and <code>lm.wfit</code> for weighted\nregression fitting.\n</p>\n<p>More <code>lm()</code> examples are available e.g., in\n<code>anscombe</code>, <code>attitude</code>, <code>freeny</code>,\n<code>LifeCycleSavings</code>, <code>longley</code>,\n<code>stackloss</code>, <code>swiss</code>.\n</p>\n<p><code>biglm</code> in package <a href=\"https://CRAN.R-project.org/package=biglm\"><span class=\"pkg\">biglm</span></a> for an alternative\nway to fit linear models to large datasets (especially those with many\ncases).\n</p>\n\n\n<h3>Examples</h3>\n\n<pre>\nrequire(graphics)\n\n## Annette Dobson (1990) \"An Introduction to Generalized Linear Models\".\n## Page 9: Plant Weight Data.\nctl &lt;- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)\ntrt &lt;- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)\ngroup &lt;- gl(2, 10, 20, labels = c(\"Ctl\",\"Trt\"))\nweight &lt;- c(ctl, trt)\nlm.D9 &lt;- lm(weight ~ group)\nlm.D90 &lt;- lm(weight ~ group - 1) # omitting intercept\n\nanova(lm.D9)\nsummary(lm.D90)\n\nopar &lt;- par(mfrow = c(2,2), oma = c(0, 0, 1.1, 0))\nplot(lm.D9, las = 1)      # Residuals, Fitted, ...\npar(opar)\n\n### less simple examples in \"See Also\" above\n</pre>\n\n<hr /><div style=\"text-align: center;\">[Package <em>stats</em> version 3.4.4 ]</div>"}}},"exec_count":9,"start":1543351155110,"input":"?lm","state":"done","pos":4,"type":"cell","end":1543351155523,"id":"3180da","kernel":"ir-sage"}
{"output":{"0":{"data":{"text/plain":"\nCall:\nlm(formula = boys ~ year, data = present)\n\nCoefficients:\n(Intercept)         year  \n   -8818512         5432  \n"}}},"exec_count":8,"start":1543351054032,"input":"linearmodel\n","state":"done","pos":3,"type":"cell","end":1543351054044,"id":"2a5fdb","kernel":"ir-sage"}
{"output":{"0":{"name":"stderr","text":"\nAttaching package: ‘dplyr’\n\n"},"1":{"name":"stderr","text":"The following objects are masked from ‘package:stats’:\n\n    filter, lag\n\n"},"2":{"name":"stderr","text":"The following objects are masked from ‘package:base’:\n\n    intersect, setdiff, setequal, union\n\n"}},"exec_count":1,"start":1543350781111,"input":"library(dplyr)\nlibrary(ggplot2)","state":"done","pos":0,"type":"cell","end":1543350782425,"id":"4b789c","kernel":"ir-sage"}
{"type":"cell","id":"b32888","pos":5,"input":""}
{"type":"file","last_load":1543416463315}
{"type":"settings","backend_state":"running","trust":true,"kernel":"ir-sage","kernel_usage":{"cpu":0,"memory":62259200}}